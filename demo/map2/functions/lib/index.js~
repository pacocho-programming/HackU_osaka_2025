// Firebase FunctionsとFirebase Admin SDKをインポート
const functions = require('firebase-functions');
const admin = require('firebase-admin');

// Firebase Admin SDKの初期化
admin.initializeApp();

// Cloud Function: "Hello World" のエンドポイントを作成
exports.helloWorld = functions.https.onRequest((req, res) => {
  res.send("Hello from Firebase!");
});

// 例えばFirestoreにデータを追加するCloud Functionも作成可能
exports.addDataToFirestore = functions.https.onRequest(async (req, res) => {
  const data = req.body; // リクエストのボディに含まれるデータを取得
  try {
    const docRef = await admin.firestore().collection('users').add(data);  // Firestoreにデータ追加
    res.status(200).send(`Data added with ID: ${docRef.id}`);
  } catch (error) {
    res.status(500).send('Error adding data: ' + error.message);
  }
});
